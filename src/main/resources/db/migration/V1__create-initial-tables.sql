CREATE TABLE T_USUARIOS (
    ID_USUARIO INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOME VARCHAR2(100) NOT NULL,
    CEP VARCHAR2(10) NOT NULL,
    EMAIL VARCHAR2(255) UNIQUE NOT NULL,
    SENHA VARCHAR2(100) NOT NULL,
    TIPO VARCHAR2(50) DEFAULT 'USER'
);


CREATE TABLE T_DRONES (
    ID_DRONE INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MODELO VARCHAR2(150) NOT NULL,
    STATUS VARCHAR2(150) DEFAULT 'ATIVO' CHECK (STATUS IN ('ATIVO', 'INATIVO', 'EM MANUTENÇÃO')),
    DATA_AQUISICAO DATE
);

CREATE TABLE T_COLETAS (
    ID_COLETA INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DATA_COLETA DATE NOT NULL,
    QUANTIDADE_RESIDUO DECIMAL(10,2)
);


CREATE TABLE T_AREA_MAPEADA (
    ID_AREA INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    BAIRRO VARCHAR2(250) NOT NULL,

    ID_DRONE INT,
    ID_COLETA INT,
    FOREIGN KEY (ID_DRONE) REFERENCES T_DRONES(ID_DRONE),
    FOREIGN KEY (ID_COLETA) REFERENCES T_COLETAS(ID_COLETA)
);


CREATE TABLE T_RESIDUOS (
    ID_RESIDUO INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TIPO_RESIDUO VARCHAR2(150) NOT NULL,
    QUANTIDADE DECIMAL(10,2) NOT NULL,

    ID_AREA INT NOT NULL,
    FOREIGN KEY (ID_AREA) REFERENCES T_AREA_MAPEADA(ID_AREA)
);

CREATE TABLE T_LOCALIZACAO (
    ID_LOCALIZACAO INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ENDERECO VARCHAR2(250) NOT NULL,
    CEP VARCHAR2(10),
    COORDENADAS VARCHAR2(50) NOT NULL,

    ID_AREA INT NOT NULL,
    FOREIGN KEY (ID_AREA) REFERENCES T_AREA_MAPEADA(ID_AREA)
);


CREATE TABLE T_SOLICITACOES (
    ID_SOLICITACAO INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DESCRICAO VARCHAR2(500) NOT NULL,
    DATA_SOLICITACAO DATE DEFAULT SYSDATE,
    STATUS VARCHAR2(150) DEFAULT 'PENDENTE' CHECK (STATUS IN ('PENDENTE', 'EM ANDAMENTO', 'CONCLUÍDA')),

    ID_DENUNCIANTE INTEGER NOT NULL,
    ID_LOCALIZACAO INTEGER NOT NULL,
    FOREIGN KEY (ID_DENUNCIANTE) REFERENCES T_USUARIOS(ID_USUARIO),
    FOREIGN KEY (ID_LOCALIZACAO) REFERENCES T_LOCALIZACAO(ID_LOCALIZACAO)
);




